// file      : bpkg/pkg-verify -*- C++ -*-
// copyright : Copyright (c) 2014-2017 Code Synthesis Ltd
// license   : MIT; see accompanying LICENSE file

#ifndef BPKG_PKG_VERIFY
#define BPKG_PKG_VERIFY

#include <bpkg/manifest>

#include <bpkg/types>
#include <bpkg/utility>

#include <bpkg/pkg-verify-options>

namespace bpkg
{
  int
  pkg_verify (const pkg_verify_options&, cli::scanner& args);

  // Verify archive is a valid package and return its manifest. Throw
  // failed if invalid or if something goes wrong. If diag is false,
  // then don't issue diagnostics about the reason why the package is
  // invalid.
  //
  package_manifest
  pkg_verify (const common_options&,
              const path& archive,
              bool ignore_unknown,
              bool diag = true);

  // Similar to the above but verifies that a source directory is a valid
  // package. Note that it doesn't enforce the <name>-<version> form for the
  // directory itself.
  //
  package_manifest
  pkg_verify (const dir_path& source, bool ignore_unknown, bool diag = true);
}

#endif // BPKG_PKG_VERIFY
