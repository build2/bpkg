// file      : bpkg/types -*- C++ -*-
// copyright : Copyright (c) 2014-2015 Code Synthesis Ltd
// license   : MIT; see accompanying LICENSE file

#ifndef BPKG_TYPES
#define BPKG_TYPES

#include <vector>
#include <string>
#include <memory>   // shared_ptr, unique_ptr
#include <ostream>

#include <odb/lazy-ptr.hxx>

#include <butl/path>
#include <butl/optional>

namespace bpkg
{
  // Commonly-used types.
  //
  using std::string;

  using strings = std::vector<string>;
  using cstrings = std::vector<const char*>;

  using butl::optional;
  using butl::nullopt;

  // Smart pointers
  //
  using std::unique_ptr;

  using std::shared_ptr;
  using std::weak_ptr;

  using odb::lazy_shared_ptr;
  using odb::lazy_weak_ptr;

  // <butl/path>
  //
  using butl::path;
  using butl::dir_path;
  using butl::basic_path;
  using butl::invalid_path;

  using paths = std::vector<path>;
  using dir_paths = std::vector<dir_path>;

  inline std::ostream&
  operator<< (std::ostream& os, const path& p) {return os << p.string ();}

  inline std::ostream&
  operator<< (std::ostream& os, const dir_path& p)
  {
    const string& s (p.string ());
    os << s;

    if (!s.empty () && !dir_path::traits::is_separator (s.back ()))
      os << dir_path::traits::directory_separator;

    return os;
  }
}

#endif // BPKG_TYPES
